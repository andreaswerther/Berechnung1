<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Physik-Berechnung – Drag & Drop</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #eef; }
    .frage { margin-bottom: 25px; }
    .droppable, .draggable {
      display: inline-block;
      padding: 10px 15px;
      margin: 5px;
      border: 1px solid #333;
      border-radius: 5px;
      background: white;
      cursor: grab;
    }
    .droppable {
      width: 40px;
      height: 40px;
      background: #ddd;
      text-align: center;
      vertical-align: middle;
      line-height: 40px;
    }
    #formelziel {
      min-height: 60px;
      border: 2px dashed #333;
      padding: 10px;
      margin-top: 10px;
      background: #f8f8f8;
    }
    #feedback, #feedbackGesucht, #feedbackErgebnis {
      margin-top: 10px;
      font-weight: bold;
    }
    input[type='text'] {
      padding: 5px;
      width: 150px;
      margin-top: 5px;
    }
  </style>
</head>
<body>

<h1>Berechnungsfrage: Spannung ermitteln</h1>

<div class="frage">
  <p><strong>Gegeben:</strong> R = 4 Ohm, I = 2 A</p>
  <p><strong>1. Gesucht ist:</strong> Spannung</p>
  <label>Gib den Formelbuchstaben für die gesuchte Größe ein:</label><br>
  <input type="text" id="gesuchteGroesse">
  <button onclick="checkGesucht()">Prüfen</button>
  <p id="feedbackGesucht"></p>
</div>

<div class="frage">
  <p><strong>2. Ziehe die passende Formel in das Feld:</strong></p>
  <div id="formelbox">
    <span class="draggable" draggable="true">U</span>
    <span class="draggable" draggable="true">=</span>
    <span class="draggable" draggable="true">R</span>
    <span class="draggable" draggable="true">·</span>
    <span class="draggable" draggable="true">I</span>
    <span class="draggable" draggable="true">+</span>
    <span class="draggable" draggable="true">/</span>
  </div>
  <div id="formelziel" ondragover="allowDrop(event)" ondrop="drop(event)"></div>
  <button onclick="checkFormel()">Formel prüfen</button>
  <p id="feedback"></p>
</div>

<div class="frage">
  <p><strong>3. Wie groß ist die Spannung?</strong></p>
  <label>Gib das Ergebnis ein (mit oder ohne Einheit):</label><br>
  <input type="text" id="nutzerErgebnis">
  <button onclick="checkErgebnis()">Prüfen</button>
  <p id="feedbackErgebnis"></p>
</div>

<script>
function allowDrop(ev) {
  ev.preventDefault();
}
function drop(ev) {
  ev.preventDefault();
  const data = ev.dataTransfer.getData("text");
  const copy = document.createElement("span");
  copy.className = "droppable";
  copy.textContent = data;
  document.getElementById("formelziel").appendChild(copy);
}
document.querySelectorAll('.draggable').forEach(el => {
  el.addEventListener('dragstart', function(ev) {
    ev.dataTransfer.setData("text", ev.target.textContent);
  });
});

function checkGesucht() {
  const eingabe = document.getElementById("gesuchteGroesse").value.trim();
  if (eingabe === "U") {
    document.getElementById("feedbackGesucht").textContent = "Richtig: Gesucht ist U.";
    document.getElementById("feedbackGesucht").style.color = "green";
  } else {
    document.getElementById("feedbackGesucht").textContent = "Falsch. Gib den richtigen Großbuchstaben an.";
    document.getElementById("feedbackGesucht").style.color = "red";
  }
}

function checkFormel() {
  const ziel = Array.from(document.getElementById("formelziel").children).map(el => el.textContent).join('');
  if (ziel === "U=R·I") {
    document.getElementById("feedback").textContent = "Richtig! U = R · I ist korrekt.";
    document.getElementById("feedback").style.color = "green";
  } else {
    document.getElementById("feedback").textContent = "Leider falsch. Überlege dir die richtige Formel zur Spannung.";
    document.getElementById("feedback").style.color = "red";
  }
}

function checkErgebnis() {
  const eingabe = document.getElementById("nutzerErgebnis").value.trim().toLowerCase();
  const erlaubt = ["8", "8v", "8 v", "8volt", "8 volt"];
  if (erlaubt.includes(eingabe.replace(/\s+/g, ''))) {
    document.getElementById("feedbackErgebnis").textContent = "Richtig: 8 Volt ist korrekt berechnet.";
    document.getElementById("feedbackErgebnis").style.color = "green";
  } else {
    document.getElementById("feedbackErgebnis").textContent = "Leider nicht korrekt – prüfe deine Rechnung.";
    document.getElementById("feedbackErgebnis").style.color = "red";
  }
}
</script>

</body>
</html>
